DROP TABLE IF EXISTS "ITEM";
CREATE TABLE "ITEM"
(
    ITEM_KEY    BIGINT GENERATED BY DEFAULT AS IDENTITY,
    NAME        VARCHAR(20)              NOT NULL,
    PRICE       DECIMAL                  NOT NULL,
    CREATED_AT  TIMESTAMP WITH TIME ZONE NOT NULL,
    CREATED_BY  BIGINT                   NOT NULL,
    MODIFIED_AT TIMESTAMP WITH TIME ZONE NOT NULL,
    MODIFIED_BY BIGINT                   NOT NULL,
    PRIMARY KEY (ITEM_KEY)
);

DROP TABLE IF EXISTS "ORDER";
CREATE TABLE "ORDER"
(
    ORDER_KEY   BIGINT GENERATED BY DEFAULT AS IDENTITY,
    STATUS      VARCHAR(20)              NOT NULL,
    CREATED_AT  TIMESTAMP WITH TIME ZONE NOT NULL,
    CREATED_BY  BIGINT                   NOT NULL,
    MODIFIED_AT TIMESTAMP WITH TIME ZONE NOT NULL,
    MODIFIED_BY BIGINT                   NOT NULL,
    PRIMARY KEY (ORDER_KEY)
);

DROP TABLE IF EXISTS "ORDER_LINE";
CREATE TABLE "ORDER_LINE"
(
    ORDER_LINE_KEY BIGINT GENERATED BY DEFAULT AS IDENTITY,
    ORDER_KEY      BIGINT                   NOT NULL,
    ITEM_KEY       BIGINT                   NOT NULL,
    QUANTITY       INT                      NOT NULL,
    CREATED_AT     TIMESTAMP WITH TIME ZONE NOT NULL,
    CREATED_BY     BIGINT                   NOT NULL,
    MODIFIED_AT    TIMESTAMP WITH TIME ZONE NOT NULL,
    MODIFIED_BY    BIGINT                   NOT NULL,
    PRIMARY KEY (ORDER_LINE_KEY)
);

ALTER TABLE "ORDER_LINE"
    ADD CONSTRAINT "ORDER_LINE_UK_01" UNIQUE (ORDER_KEY, ITEM_KEY);